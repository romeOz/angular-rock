!function(){"use strict";function e(e,r,o){e.defaults.headers.common["Content-Type"]="application/json",e.interceptors.push(t);var s=n(r);o.value("rock",{lang:s})}function n(e){var n=window.navigator,t=(angular.element(document.querySelector("html")).attr("lang")||n.language||n.browserLanguage||n.systemLanguage||n.userLanguage||"en").split("-")[0];return e.translations("en",{lang:{notPage:"page not found",notContent:"content is empty",notFound:"not found",search:"search",username:"username",email:"e-mail",password:"password",confirmPassword:"confirm password",token:"token",captcha:"captcha",invalidEmail:"Email is invalid.",invalidTokenActivated:"Wrong token or user is already activated.",invalidPasswordOrEmail:"Password or email is invalid.",invalidPasswordOrUsername:"Password or login is invalid.",existsUsername:"User with this name already exists.",existsUsernameOrEmail:"User with this name/e-mail already exists.",notExistsUser:"User with this email does not exist or is blocked.",notActivatedUser:"Account is not activated",failLogin:"Fail authorization.",failRecovery:"Fail recovery password.",failSignup:"Fail registration.",failSendEmail:"Email not sent.",failActivated:"Fail activated.",failLogout:"Fail logout.",successLogin:"You successfully login.",successLogout:"You successfully logout.",successSignup:"Thanks for signing up!<br/>On e-mail  <b>{{email}}</b>, sent an email with an activation code.",successRecovery:"Your new password has been sent to your e-mail <b>{{email}}</b>.",successActivate:"Your account is activated.",signup:"sign up",login:"login",signin:"sign in",activation:"activation",close:"close",activate:"activate",registration:"registration",authorization:"login",resetPassword:"reset password",recovery:"recovery",loginLogout:'You\'re sign in. Authorization is required to <a href="{{url}}" rel="nofollow">logout</a> of your profile',signupLogout:'You\'re sign in. The registration must be <a href="{{url}}" rel="nofollow">logout</a> of your profile',recoveryLogout:'You\'re sign in. To recover the password required to <a href="{{url}}" rel="nofollow">logout</a> of your profile',notJs:"Your browser does not support JavaScript. Try to fix this in the browser settings.",logout:"logout",characters:"characters",failHTTPRequest:"HTTP-request error.",failServer:"Server error.",failAccess:"Denied access.",error:"error",value:"value",success:"success",forgotPassword:"forgot password"},validate:{required:"{{name}} must not be empty",notRequired:"{{name}} must be empty",min:"{{name}} must be greater than {{minValue}}",minInclusive:"{{name}} must be greater than or equals {{minValue}}",notMin:"{{name}} must not be greater than {{minValue}}",notMinInclusive:"{{name}} must not be greater than or equals {{minValue}}",max:"{{name}} must be lower than {{maxValue}}",maxInclusive:"{{name}} must be lower than or equals {{maxValue}}",notMax:"{{name}} must not be lower than {{maxValue}}",notMaxInclusive:"{{name}} must not be lower than or equals {{maxValue}}",email:"{{name}} must be valid",notEmail:"{{name}} must not be valid",regex:"{{name}} contains invalid characters",notRegex:"{{name}} does not contain invalid characters",captcha:"captcha must be valid",notCaptcha:"captcha must not be valid",confirm:"values must be equals",notConfirm:"values must not be equals",call:"{{name}} must be valid",unique:"{{value}} has already been taken",notUnique:"{{value}} not already been taken.",csrf:"CSRF-token must be valid",notCsrf:"CSRF-token must not be valid",date:"{{name}} must be date",dateFormat:"{{name}} must be a valid date. Sample format: {{format}}",notDate:"{{name}} must not be date",notDateFormat:"{{name}} must not be a valid date in the format {{format}}"}}),e.translations("ru",{lang:{notPage:"страница не найдена",notContent:"материал отсутсвует",notFound:"ничего не найдено",resetPassword:"сбросить пароль",recovery:"восстановление пароля",signup:"зарегистрироваться",signin:"войти",activation:"активация",password:"пароль",confirmPassword:"подтверждение пароля",token:"токен",captcha:"код подтверждения",login:"логин",successLogged:"вы успешно авторизированы",close:"закрыть",notJs:"Ваш браузер не поддерживает JavaScript. Попробуйте исправить это в настройках браузера.",email:"e-mail",username:"логин/псевдоним",existsUsername:"Пользователь с таким именем уже существует.",existsUsernameOrEmail:"Пользователь с таким именем/e-mail уже существует.",notExistsUser:"Пользователя с таким email не существует или блокирован.",invalidEmail:"Указан неверный email.",invalidPasswordOrEmail:"Указан неверный пароль или email.",invalidPasswordOrUsername:"Указан неверный пароль или логин.",notActivatedUser:"Учётная запись не активирована.",invalidTokenActivated:"Неверный токен или пользователь уже активирован.",successLogin:"Вы успешно авторизировались.",successLogout:"Вы успешно разлогинились.",successSignup:"Спасибо за регистрацию!<br/>На указанный Вами адрес электронной почты <b>{{email}}</b>, отправлено письмо с подтверждением.",successRecovery:"Новый пароль, был отправлен на Ваш адрес электронной почты <b>{{email}}</b>.",successActivate:"Ваша учётная запись активирована.",failLogin:"Ошибка при авторизации.",failRecovery:"Ошибка при восстановлении пароля.",failSignup:"Ошибка при регистрации.",failActivated:"Ошибка при активации.",failLogout:"Ошибка при разлогировании.",failSendEmail:"email не отправлен.",loginLogout:'Вы авторизированы. Для повторной авторизации требуется <a href="{{url}}" rel="nofollow">выйти</a> из своего профиля.',signupLogout:'Вы авторизированы. Для регистрации требуется <a href="{{url}}" rel="nofollow">выйти</a> из своего профиля.',recoveryLogout:'Вы авторизированы. Для для восстановлении пароля требуется <a href="{{url}}" rel="nofollow">выйти</a> из своего профиля.',logout:"выход",characters:"символов",failHTTPRequest:"Ошибка HTTP-запроса.",failServer:"Ошибка сервера.",failAccess:"Отказано в доступе.",error:"ошибка",value:"значение",forgotPassword:"забыли пароль",success:"успех"},validate:{required:"{{name}} не должно быть пустым",notRequired:"{{name}} должно быть пустым",min:"{{name}} должно быть больше {{minValue}}",minInclusive:"{{name}} должно быть больше или равно {{minValue}}",notMin:"{{name}} не должно быть больше {{minValue}}",notMinInclusive:"{{name}} не должно быть больше или равно {{minValue}}",max:"{{name}} должно быть меньше {{maxValue}}",maxInclusive:"{{name}} должно быть меньше или равно {{maxValue}}",notMax:"{{name}} не должно быть меньше {{maxValue}}",notMaxInclusive:"{{name}} не дожно быть меньше или равно {{maxValue}}",email:"{{name}} должен быть верным",notEmail:"{{name}} не должен быть верным",regex:"{{name}} содержит неверные символы",notRegex:"{{name}} не содержит верные символы",captcha:"каптча должна быть верной",notCaptcha:"каптча не должна быть верной",confirm:"значения должны совпадать",notConfirm:"значения не должны совпадать",call:"{{name}} должно быть верным",unique:"{{value}} уже существует",notUnique:"{{value}} должно существовать",csrf:"CSRF-токен должен быть верным",notCsrf:"CSRF-токен не должен быть верным",date:"{{name}} должно быть датой",dateFormat:"{{name}} должно соответствовать формату: {{format}}",notDate:"{{name}} не должно быть датой",notDateFormat:"{{name}} не должно соответствовать формату: {{format}}"}}),e.preferredLanguage(t),t}function t(e,n){return{response:function(e){var t=n.get("httpUtils");return e.config.cache||t.csrf(e.data,e.headers),e},responseError:function(t){var r=n.get("httpUtils");return t.config&&!t.config.cache&&r.csrf(t.data,t.headers),r.error(t.data,t.status,t.statusText),e.reject(t)}}}function r(e,n,t,r,s,a,i){o(t),e.rock={},e.rock.lang=a.lang,e.rock.csrf=t,e.rock.user=r,e.rock.html=i,e.rock.alias=s,e.$watch(function(e){return e.rock.csrf.getToken()},function(e){e&&(n.defaults.headers.post["X-CSRF-Token"]=e)})}function o(e){var n=angular.element(document.querySelector("meta[name=csrf-param]")).attr("content"),t=angular.element(document.querySelector("meta[name=csrf-token]")).attr("content");n&&t&&(e.addToken(t),e.addParam(n))}angular.module("rock",["pascalprecht.translate","rock.helpers","rock.services","rock.directives","rock.filters","rock.notification","rock.forms"]).config(e).run(r),e.$inject=["$httpProvider","$translateProvider","$provide"],t.$inject=["$q","$injector"],r.$inject=["$rootScope","$http","csrfUtils","userUtils","alias","rock","htmlUtils"]}(),function(){"use strict";function e(){var e={};return e.upperFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.strpos=function(e,n,t){void 0===t&&(t=0);var r=e.indexOf(n,t);return r>=0?r:!1},e.reverse=function(e){return e.split("").reverse().join("")},e.strncmp=function(e,n,t){var r=(e+"").substr(0,t),o=(n+"").substr(0,t);return r==o?0:r>o?1:-1},e.strpos=function(e,n,t){var r=e.indexOf(n,t);return r>=0?r:!1},e.ltrim=function(e,n){n=n?(n+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \\s ";var t=new RegExp("^["+n+"]+","g");return(e+"").replace(t,"")},e.rtrim=function(e,n){n=n?(n+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"\\$1"):" \\s ";var t=new RegExp("["+n+"]+$","g");return(e+"").replace(t,"")},e}function n(){var e={};return e.flatten=function(e,n){var t=angular.isArray(e),r=t?[]:{},o=function(e,t){angular.forEach(e,function(e,s){return angular.isObject(e)?void o(e,t):(angular.isFunction(n)&&(e=n(e)),void(t?r.push(e):r[s]=e))})};return o(e,t),r},e}function t(e,n){var t={},r={};return t.set=function(n,o){e.strncmp(n,"@",1)&&(n="@"+n);var s="/",a=e.strpos(n,s),i=a===!1?n:n.substr(0,a);null!==o?(o=e.strncmp(o,"@",1)?e.rtrim(o,"\\/"):t.get(o),void 0===r[i]?a===!1?r[i]=o:(r[i]={},r[i][n]=o):angular.isString(r[i])?a===!1?r[i]=o:(r[i]={},r[i][n]=o,r[i][i]=r[i]):r[i][n]=o):void 0!==r[i]&&(angular.isArray(r[i])?r[i][n]=void 0:a===!1&&(r[i]=void 0))},t.get=function(t){if(e.strncmp(t,"@",1))return t;var o="/",s=e.strpos(t,o),a=s===!1?t:t.substr(0,s);if(void 0!==r[a]){if(angular.isString(r[a]))return s===!1?r[a]:r[a]+t.substr(s);var i=_.find(r[a],function(n,r){return 0===e.strpos(t+o,r+o)?n+t.substr(r.length):void 0})}return void 0===i&&n.debug("Invalid path alias: "+t),i},t.remove=function(e){r[e]=void 0},t}angular.module("rock.helpers",[]).factory("stringHelper",e).factory("collectionHelper",n).factory("alias",t),t.$inject=["stringHelper","notification"]}(),function(){"use strict";function e(e,n,t,r,o){var s={};return e._user=void 0,s.set=function(n){e._user=r.removeExtend(n)},s.add=function(n,t){e._user||(e._user={}),e._user[n]=r.removeExtend(t)},s.get=function(n){return e._user&&void 0!==e._user[n]?e._user[n]:null},s.getAll=function(){return e._user},s.isLogged=function(){return void 0===e._user?void 0:!!e._user},s.logout=function(r){n.get(URI(r).setSearch(t.get())).success(function(){e._user=null,o.success("lang.successLogout"),e.$broadcast("onLogout")})},s}function n(){var e="Success.";this.defaultMsg=function(n){e=n},this.$get=["$http",function(e){var n={};return n.reloadCaptcha=function(n){return e.get(n)},n}]}function t(){var e="_extend",n="lang.failHTTPRequest";this.extendAttribute=function(n){e=n},this.defaultMsg=function(e){n=e},this.$get=["collectionHelper","stringHelper","csrfUtils","notification",function(t,r,o,s){function a(e){return t.flatten(e,function(e){return i(e)})}function i(e){return e=r.upperFirst(e),"."!==e.slice(-1)?e+".":e}var c={};return c.csrf=function(n,t){return angular.isObject(n)&&n[e]&&n[e].csrf?(o.addToken(n[e].csrf.token),void o.addParam(n[e].csrf.param)):void(angular.isFunction(t)&&o.addToken(t("x-csrf-token")))},c.normalizeAlerts=function(e,t,r){return e||(e=[r||n]),void 0===t&&(t=!0),e=a(c.removeExtend(e)),t===!0&&angular.isArray(e)&&(e=_.uniq(e)),e},c.getExtend=function(n,t){return angular.isObject(n)&&n[e]?t?n[e][t]||null:n[e]:null},c.removeExtend=function(n){return delete n[e],n},c.error=function(e,n,t){switch(e&&e.error&&e.error.message&&s.debug(e.error.message),n){case 400:case 422:break;case 403:s.error("lang.failAccess",{},i(t));break;case 404:s.error("lang.notPage",{},i(t));break;case 500:s.error("lang.failServer",{},i(t))}},c}]}function r(){var e={},n={token:void 0,param:void 0};return e.addToken=function(e){angular.isString(e)&&(n.token=e)},e.addParam=function(e){e&&(n.param=e)},e.get=function(){if(n.token&&n.param){var e={};return e[n.param]=n.token,e}return null},e.getToken=function(){return n.token},e.getParam=function(){return n.param},e.has=function(){return n&&n.token},e}function o(e,n){var t={};return t.show=function(e,t,r){n.open({templateUrl:t,controller:r})},t}function s(){var e='<iframe width="{{width}}" height="{{height}}" frameborder="0" allowfullscreen="allowfullscreen" src="{{src}}"></iframe>',n=480,t=360;this.video={width:function(e){n=e},height:function(e){t=e}},this.$get=["$modal","$interpolate",function(n,t){function r(e,n,r,o){return t(e)({width:r,height:o,src:n})}var o={};return o.playVideo=function(n,t,o,s,a){n&&(a.preventDefault(),angular.element(a.target).replaceWith(r(e,n,t,o)))},o.playVideoModal=function(t,o,s,a,i){function c(e,n){e.cancel=function(){n.dismiss("cancel")}}t&&(i.preventDefault(),c.$inject=["$scope","$modalInstance"],a&&(a='<div class="modal-header"><button data-ng-click="cancel()" class="close" type="button">×</button><h4 class="modal-title"><span class="glyphicon glyphicon-star"></span> '+a+"</h4></div>"),n.open({template:a+'<div class="modal-body">'+r(e,t,o,s)+"</div>",controller:c}))},o}]}angular.module("rock.services",[]).factory("userUtils",e).provider("formUtils",n).provider("httpUtils",t).factory("csrfUtils",r).factory("modalUtils",o).provider("htmlUtils",s),e.$inject=["$rootScope","$http","csrfUtils","httpUtils","notification"],o.$inject=["$templateCache","$modal"]}(),function(){"use strict";function e(e){return function(n){return"undefined"==typeof n||null===n?"":e.trustAsHtml(n)}}function n(){return function(e,n){return e&&angular.isObject(e)?(e=_.filter(e,function(e,t){return _.contains(n,t)}),_.isEmpty(e)?null:e):void 0}}angular.module("rock.filters",[]).filter("unsafe",e).filter("byKeys",n),e.$inject=["$sce"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(n,t){n.$root.$watch(function(){return e.getToken()},function(e){e&&t.attr("content",e)})}}}function n(e){return{restrict:"A",scope:{rawHtml:"=bindCompiledHtml"},link:function(n,t){n.$watch("rawHtml",function(r){if(r){var o=e(r)(n.$parent);t.contents().remove(),t.append(o)}})}}}function t(){return{restrict:"A",scope:{options:"=rockUrl"},link:function(e,n,t){if(e.options&&angular.isObject(e.options)){var r="href",o=e.options;if(o.attr&&(r=o.attr),t[r]){var s=URI(t[r]);o.self&&s.pathname(URI().pathname()),n.attr(r,s),o.csrf&&e.$root.$watch(function(e){return e.rock.csrf.getToken()},function(t){t&&n.attr(r,s.setSearch(e.$root.rock.csrf.get()))})}}}}}angular.module("rock.directives",[]).directive("bindCompiledHtml",n).directive("rockMetaCsrf",e).directive("rockUrl",t),e.$inject=["csrfUtils"],n.$inject=["$compile"]}(),function(){"use strict";angular.module("rock.notification",["rock.notification.controllers","rock.notification.services"])}(),function(){"use strict";function e(e,n){e.notifications=n.getAll(),e.merge=function(e){n.merge(e)},e.closeable=!0,e.closeAlert=function(e){n.remove(e)}}angular.module("rock.notification.controllers",["ui.bootstrap","ngAnimate"]).controller("NotificationController",e),e.$inject=["$scope","notification"]}(),function(){"use strict";function e(){var e=[],n=!0;this.debugEnabled=function(e){n=e},this.$get=["$translate",function(n){function t(t,r,o,s){var a=function(n){switch(t){case"warn":t="warning";break;case"error":t="danger";break;case"success":t="success";break;default:t="info"}e.push({msg:n,type:t})};n(r,o).then(a)["catch"](function(e){a(s||e)})}return{log:function(e,n,r){t("log",e,n,r)},info:function(e,n,r){t("info",e,n,r)},success:function(e,n,r){t("success",e,n,r)},warn:function(e,n,r){t("warn",e,n,r)},error:function(e,n,r){t("error",e,n,r)},debug:function(e){angular.isString(e)&&(e=new Error(e)),console.debug(e)},merge:function(n){n&&(angular.isString(n[0])&&(n=n.map(function(e){return{msg:e}})),angular.extend(e,n))},getAll:function(){return e},exists:function(){return!!e},remove:function(n){e&&e.splice(n,1)},removeAll:function(){e=[]}}}]}angular.module("rock.notification.services",[]).provider("notification",e)}(),function(){"use strict";angular.module("rock.forms",["rock.forms.controllers","rock.forms.services","rock.forms.directives"])}(),function(){"use strict";function e(){return{require:"ngModel",restrict:"A",scope:{match:"=rockMatch"},link:function(e,n,t,r){e.$watch(function(){var n=r.$modelValue||r.$$invalidModelValue;return r.$pristine&&angular.isUndefined(n)||e.match===n},function(e){r.$setValidity("match",e)})}}}function n(e){var n="ng-focused";return{restrict:"A",require:"ngModel",link:function(t,r,o,s){s.$focused=!1,r.bind("focus",function(t){r.addClass(n),e(function(){s.$focused=!1},0)}).bind("blur",function(t){r.removeClass(n),e(function(){s.$focused=!0},0)})}}}function t(e,n){return n.get("form/strong-password")||n.put("form/strong-password",'<progressbar value="value" type="{{class}}">{{value}}%</progressbar>'),{templateUrl:"form/strong-password",restrict:"A",scope:{pwd:"=rockPasswordStrong"},link:function(n){var t=function(n){var t,r,o,s,a={pos:{},neg:{}},i={pos:{},neg:{seqLetter:0,seqNumber:0,seqSymbol:0}},c=0,u="abcdefghijklmnopqrstuvwxyz",l="01234567890",m="\\!@#$%&/()=?¿";if(n){for(a.pos.lower=n.match(/[a-z]/g),a.pos.upper=n.match(/[A-Z]/g),a.pos.numbers=n.match(/\d/g),a.pos.symbols=n.match(/[$-/:-?{-~!^_`\[\]]/g),a.pos.middleNumber=n.slice(1,-1).match(/\d/g),a.pos.middleSymbol=n.slice(1,-1).match(/[$-/:-?{-~!^_`\[\]]/g),i.pos.lower=a.pos.lower?a.pos.lower.length:0,i.pos.upper=a.pos.upper?a.pos.upper.length:0,i.pos.numbers=a.pos.numbers?a.pos.numbers.length:0,i.pos.symbols=a.pos.symbols?a.pos.symbols.length:0,t=_.reduce(i.pos,function(e,n){return e+Math.min(1,n)},0),i.pos.numChars=n.length,t+=i.pos.numChars>=8?1:0,i.pos.requirements=t>=3?t:0,i.pos.middleNumber=a.pos.middleNumber?a.pos.middleNumber.length:0,i.pos.middleSymbol=a.pos.middleSymbol?a.pos.middleSymbol.length:0,a.neg.consecLower=n.match(/(?=([a-z]{2}))/g),a.neg.consecUpper=n.match(/(?=([A-Z]{2}))/g),a.neg.consecNumbers=n.match(/(?=(\d{2}))/g),a.neg.onlyNumbers=n.match(/^[0-9]*$/g),a.neg.onlyLetters=n.match(/^([a-z]|[A-Z])*$/g),i.neg.consecLower=a.neg.consecLower?a.neg.consecLower.length:0,i.neg.consecUpper=a.neg.consecUpper?a.neg.consecUpper.length:0,i.neg.consecNumbers=a.neg.consecNumbers?a.neg.consecNumbers.length:0,s=0;s<u.length-2;s++){var f=n.toLowerCase();o=u.substring(s,parseInt(s+3)),r=e.reverse(o),(-1!==f.indexOf(o)||-1!==f.indexOf(r))&&i.neg.seqLetter++}for(s=0;s<l.length-2;s++)o=l.substring(s,parseInt(s+3)),r=e.reverse(o),(-1!==n.indexOf(o)||-1!==n.toLowerCase().indexOf(r))&&i.neg.seqNumber++;for(s=0;s<m.length-2;s++)o=m.substring(s,parseInt(s+3)),r=e.reverse(o),(-1!==n.indexOf(o)||-1!==n.toLowerCase().indexOf(r))&&i.neg.seqSymbol++;i.neg.repeated=_.chain(n.toLowerCase().split("")).countBy(function(e){return e}).reject(function(e){return 1===e}).reduce(function(e,n){return e+n},0).value(),c+=4*i.pos.numChars,i.pos.upper&&(c+=2*(i.pos.numChars-i.pos.upper)),i.pos.lower&&(c+=2*(i.pos.numChars-i.pos.lower)),(i.pos.upper||i.pos.lower)&&(c+=4*i.pos.numbers),c+=6*i.pos.symbols,c+=2*(i.pos.middleSymbol+i.pos.middleNumber),c+=2*i.pos.requirements,c-=2*i.neg.consecLower,c-=2*i.neg.consecUpper,c-=2*i.neg.consecNumbers,c-=3*i.neg.seqNumber,c-=3*i.neg.seqLetter,c-=3*i.neg.seqSymbol,a.neg.onlyNumbers&&(c-=i.pos.numChars),a.neg.onlyLetters&&(c-=i.pos.numChars),i.neg.repeated&&(c-=i.neg.repeated/i.pos.numChars*10)}return Math.max(0,Math.min(100,Math.round(c)))},r=function(e){switch(Math.round(e/33)){case 0:case 1:return"danger";case 2:return"warning";case 3:return"success"}return""};n.$watch("pwd",function(){n.value=t(n.pwd),n["class"]=r(n.value)})}}}function r(){return{restrict:"A",require:"ngModel",link:function(e,n,t,r){e.$watch("isSend()",function(e){e===!0&&(r.$setViewValue(void 0),r.$setPristine(!0),r.$render())})}}}function o(e,n,t){return{require:"ngModel",link:function(r,o,s,a){var i;(i=n.get("form/reset-field-icon"))||(i='<i ng-show="enabled" ng-mousedown="resetField()" class="glyphicon glyphicon-remove-circle reset-icon"></i>',n.put("form/reset-field-icon",i));var c=/text|search|tel|url|email|password/i;return"INPUT"!==o[0].nodeName?void t.debug(new Error("'resetField' is limited to input elements")):c.test(s.type)?(r=r.$new(),i=e(i)(r),o.after(i),r.resetField=function(){a.$setViewValue(void 0),a.$setPristine(!0),a.$render()},void o.bind("input",function(){r.enabled=!a.$isEmpty(o.val())}).bind("focus",function(){r.enabled=!a.$isEmpty(o.val()),r.$apply()}).bind("blur",function(){r.enabled=!1,r.$apply()})):void t.debug(new Error("Invalid input type for resetField: "+s.type))}}}angular.module("rock.forms.directives",["ui.bootstrap.progressbar","template/progressbar/progress.html","template/progressbar/progressbar.html"]).directive("rockFormFocus",n).directive("rockPasswordStrong",t).directive("rockMatch",e).directive("rockResetField",r).directive("rockResetFieldIcon",o),n.$inject=["$timeout"],t.$inject=["stringHelper","$templateCache"],o.$inject=["$compile","$templateCache","notification"]}(),function(){"use strict";function e(e){return function(n,t){return n?(void 0===t&&(t=!0),e.normalizeAlerts(n,t)):void 0}}function n(e,n,t,r,o,s,a){function i(n){e.sending=!1,n&&(e["class"]="alert-success",t("lang.success").then(function(n){e.response.messages||(e.response.messages=[]),e.response.messages.push(n)}))}function c(n,t){e.sending=!1,e["class"]="alert-danger",422===t&&(e.response.messages=n)}e.response={},e.sending=!1,e["class"]="alert-danger",e.formName=null,e.validateOnChanged=!1,e.isSend=function(){return e.sending},e.addAlert=function(n,t){e.response.messages||(e.response.messages={}),e.response.messages[n]=t},e.getAlert=function(n){return e.isAlerts()?e.response.messages[n]:void 0},e.getAlerts=function(){return e.response.messages},e.isAlerts=function(){return!!e.response.messages},e.existsAlert=function(n){return e.isAlerts()?!!e.response.messages[n]:!1},e.clear=function(){e.response={}},e.pristine=function(n){var t=e.formName;return e[t]&&e[t][n]?e[t][n].$pristine:!1},e.invalid=function(n){var t=e.formName;return e[t]&&e[t][n]?e[t][n].$invalid:!0},e.bindError=function(n){return e.getAlert(n)},e.showError=function(n,t){var r=e.formName;return e[r]&&e[r][n]?e.validateOnChanged?(e[r][n].$dirty||e[r].$submitted)&&(e[r][n].$focused||e[r].$submitted)&&e[r][n].$error[t]:(e[r][n].$dirty||e[r].$submitted)&&e[r][n].$error[t]:!1},e.hideError=function(n){var t=e.formName;return e[t]&&e[t][n]?e[t][n].$valid:!1},e.showHighlightError=function(n){var t=e.formName;return e[t]&&e[t][n]?e.validateOnChanged?!e[t][n].$invalid||!e[t][n].$focused&&!e[t].$submitted||e[t][n].$pristine&&!e[t].$submitted?"":"has-error":!e[t][n].$invalid||e[t][n].$pristine&&!e[t].$submitted?"":"has-error":""},e.getCaptcha=function(){return e.response.captcha},e.reloadCaptcha=function(e,n){e&&(n.preventDefault(),o.reloadCaptcha(e).success(function(e){return e?void(n.target.src=e):void a.debug('Request data "captcha" is empty.')}))},e.submit=function(t,o){var s,u={};if(!e.formName)return a.debug("Name of form is empty"),void o.preventDefault();if(s=e.formName,e[s].$setSubmitted(),e[s].$invalid)return void o.preventDefault();if(t){if(o.preventDefault(),e[s].$submitted=!1,!e[s].values)return void a.debug("Values of form is empty");e.clear(),e.sending=!0,u[s]=e[s].values,u[s][r.getParam()]=r.getToken(),n.post(t,u).success(i).error(c)}},e.logout=function(e,n){e&&(n.preventDefault(),s.logout(e))}}angular.module("rock.forms.controllers",["pascalprecht.translate"]).controller("RockFormController",n).filter("normalizeAlerts",e),e.$inject=["httpUtils"],n.$inject=["$scope","$http","$translate","csrfUtils","formUtils","userUtils","notification"]}();